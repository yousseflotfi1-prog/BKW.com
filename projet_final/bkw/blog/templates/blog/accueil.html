{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Accueil - BKW</title>
<style>
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family: Tahoma, Geneva, sans-serif; background:#f4f4f9; color:#333; }
header { display:flex; align-items:center; padding:10px 20px; background:#0077cc; color:white; }
header img { height:50px; }
header h1 { margin-left:10px; font-size:1.5rem; }
nav { margin-left:auto; }
nav a { color:white; text-decoration:none; margin-left:15px; font-weight:bold; }
nav a:hover { text-decoration:underline; }
.container { max-width:1000px; margin:40px auto; padding:0 20px; }
.search { margin-bottom:30px; text-align:center; }
.search input[type="text"] { padding:10px; width:60%; border-radius:5px; border:1px solid #ccc; }
.search button { padding:10px 20px; border:none; background:#0077cc; color:white; border-radius:5px; cursor:pointer; font-weight:bold; }
.search button:hover { background:#005fa3; }
.article { background:white; padding:20px; margin-bottom:20px; border-radius:10px; box-shadow:0 5px 15px rgba(0,0,0,0.1); }
.article h3 { color:#0077cc; margin-bottom:10px; }
.article p { margin-bottom:5px; }
.footer { background:#005fa3; color:white; text-align:center; padding:20px 0; margin-top:50px; }

@media (max-width:600px){
    .search input[type="text"] { width:80%; }
}
</style>
</head>
<body>

<header>
    <a href="{% url 'accueil' %}">
        <img src="{% static 'blog/logo.png' %}" alt="BKW">
    </a>
    <h1>BKW</h1>
    <nav>
        {% if user.is_authenticated %}
            <a href="{% url 'logout' %}">Se déconnecter</a>
            {% if user.is_superuser %}
                <a href="{% url 'admin_dashboard' %}">Dashboard Admin</a>
            {% endif %}
        {% else %}
            <a href="{% url 'signup' %}">S'inscrire</a>
            <a href="{% url 'login' %}">Se connecter</a>
        {% endif %}
    </nav>
</header>

<div class="container">
    <div class="search">
        <form method="GET">
            <input type="text" name="q" placeholder="Rechercher un article..." value="{{ query|default:'' }}">
            <button type="submit">Rechercher</button>
        </form>
    </div>

    {% for article in articles %}
    <div class="article">
        <h3>{{ article.titre }}</h3>
        <p><strong>Auteur:</strong> {{ article.auteur }} | <strong>Genre:</strong> {{ article.genre }} | <strong>Date:</strong> {{ article.date }}</p>
        <p>{{ article.contenu|truncatewords:40 }}</p>
        {% if article.fichier %}
            <a href="{{ article.fichier.url }}" style="color:#0077cc; text-decoration:none; font-weight:bold;">Télécharger</a>
        {% endif %}
    </div>
    {% empty %}
        <p>Aucun article trouvé.</p>
    {% endfor %}
</div>

<div class="footer">
    &copy; 2026 BKW - Tous droits réservés
</div>

</body>
</html>